<html>
<script src='https://d3js.org/d3.v5.min.js'></script>
<style> circle {fill: lightblue; stroke: black;} </style>
<body onload='init()'>
<svg width=500 height=500>
</svg>
<script>
async function init() {
  const data = await d3.csv("https://maya-jha.github.io/data/wdi.csv");
  margin = 100;
  height = 400;
  width = 400;
  // setup x
var xValue = function(d) { return d.HealthExpCapita;}, // data -> value
//xDomain = [d3.min(data, xValue)-1, d3.max(data, xValue)+1];
xDomain = [10, 10000]
yDomain = [10, 100]
xScale = d3.scaleLinear.domain(xDomain).range([0,width]) // valu

// setup y
    yScale = d3.scaleLinear.domain(xDomain).range([height, 0]) // value -> display
    //yAxis = d3.svg.axis().scale(yScale).orient("left");
  var svg = d3.select("svg")
              .append("g")
              .attr("transform", "translate(" + margin / 2 + "," + margin / 2 + ")");
  svg.selectAll("circle")
    .data(data)
    .enter()
    .append("circle")
    .attr('cx',function(d,i) {return xScale(d.HealthExpCapita);})
        .attr('cy',function(d, i) { return yScale(d.LifeExpectancyMale); })
        .attr('r', function(d, i) { return (log(parseInt(d.PopulationTotal))); })

   d3.select("svg")
  .append("g")
  .attr("transform", "translate(" + margin / 2 + "," + margin / 2 + ")")
  .call(d3.axisLeft(yScale).tickValues([10, 20, 50, 100]).tickFormat(d3.format("~s")))

  d3.select("svg")
      .append("g")
      .attr("transform", "translate(" + margin / 2 + "," + (height + margin / 2) + ")")
      .call(d3.axisBottom().scale(xScale).tickValues([10, 20, 50, 100]).tickFormat(d3.format("~s")));
}

</script>
</body>
</html>
